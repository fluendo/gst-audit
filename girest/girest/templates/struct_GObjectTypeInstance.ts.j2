{# GObjectTypeInstance template - specific template for GObject.TypeInstance struct #}
{% extends "struct.ts.j2" %}

{% block signature %}
// Type interface for GObject constructors with static get_type method
interface GObjectConstructor<T extends GObjectTypeInstance> {
  new (ptr: string, transferType: transferType): T;
	get_type(): Promise<string>;
}

export class GObjectTypeInstance{% if struct.parent_schema %} extends {{ struct.parent_schema.valid_name }}{% endif %} {
{% endblock %}

{% block methods %}
	castTo<T extends GObjectTypeInstance>(TargetClass: GObjectConstructor<T>): T {
    return new TargetClass(this.ptr, 'none');
  }

	async isOf<T extends GObjectTypeInstance>(TargetClass: GObjectConstructor<T>): Promise<boolean> {
    const type = await TargetClass.get_type();
    const is_type = await GObject.type_check_instance_is_a(this, type);
    return is_type;
  }

{{ super() }}
{% endblock %}
