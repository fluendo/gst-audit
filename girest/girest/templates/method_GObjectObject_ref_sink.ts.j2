{# Custom template for GObject.Object.ref_sink method to fix infinite recursion #}
{% extends "method.ts.j2" %}
{% block body %}
    const url = new URL(`${apiConfig.normalizedBasePath}{{ ns.method_path }}`, apiConfig.baseUrl);
    const response = await fetch(url.toString());
    if (!response.ok) throw new Error(`HTTP error! status: ${response.status}`);
    // ref_sink() should not create a new instance - it just sinks the floating reference
    // and returns the same object (this) to avoid infinite recursion
    return this;
  }
{% endblock %}
